var c=Object.defineProperty,y=Object.defineProperties,P=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var p=(s,t,o)=>t in s?c(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,u=(s,t)=>{for(var o in t||(t={}))d.call(t,o)&&p(s,o,t[o]);if(l)for(var o of l(t))E.call(t,o)&&p(s,o,t[o]);return s},g=(s,t)=>y(s,f(t));var k=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports),O=(s,t)=>{for(var o in t)c(s,o,{get:t[o],enumerable:!0})},S=(s,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of w(t))!d.call(s,i)&&i!==o&&c(s,i,{get:()=>t[i],enumerable:!(n=P(t,i))||n.enumerable});return s};var A=s=>S(c({},"__esModule",{value:!0}),s);var v=k(($,D)=>{D.exports={name:"sqltools-driver-pg",displayName:"SQLTools PostgreSQL/Cockroach Driver",description:"SQLTools PostgreSQL/Cockroach Driver",version:"0.4.0",engines:{vscode:"^1.42.0"},publisher:"mtxr",license:"MIT",private:!0,repository:{type:"git",url:"https://github.com/mtxr/vscode-sqltools.git",directory:"packages/drivers.pg"},bugs:{url:"https://github.com/mtxr/vscode-sqltools/labels/pg"},keywords:["sqltools-driver","postgre","postgres","postgresql","cockroach","cockroachdb"],galleryBanner:{theme:"dark",color:"#333333"},icon:"icon.png",categories:["Programming Languages","Snippets","Formatters","Other"],extensionDependencies:["mtxr.sqltools"],activationEvents:["*","onLanguage:sql","onCommand:sqltools.*"],main:"./out/extension.js",scripts:{"test:tsc":"tsc --noEmit -p ./tsconfig.json --skipLibCheck",clean:"rimraf -rf out dist *.vsix",predev:"yarn run clean",dev:"yarn run watch",prebuild:"yarn run clean && yarn run tsc-check",build:'cross-env NODE_ENV=production concurrently "npm:build:*"',"build:ext":`yarn run compile:ext --define:process.env.NODE_ENV="'production'" --minify`,"build:ls":`yarn run compile:ls --define:process.env.NODE_ENV="'production'" --minify`,esbuild:"esbuild --platform=node --tsconfig=./tsconfig.json --external:vscode --color=true --format=cjs",prepackage:"yarn run build",package:"vsce package --yarn -o .","compile:ext":`yarn run esbuild --bundle ./src/extension.ts --outfile=./out/extension.js --target=es2017 --define:process.env.PRODUCT="'ext'"`,"compile:ls":`yarn run esbuild --bundle ./src/ls/plugin.ts --outfile=./out/ls/plugin.js --target=es2015 --define:process.env.PRODUCT="'ls'"`,"tsc-check":"yarn run ts --noEmit --preserveWatchOutput",watch:'concurrently "npm:watch:*"',"watch:ext":`yarn run compile:ext --define:process.env.NODE_ENV="'development'" --sourcemap --watch`,"watch:ls":`yarn run compile:ls --define:process.env.NODE_ENV="'development'" --sourcemap --watch`,"dev:tsc":"yarn run tsc-check -w",ts:"tsc -p ."},devDependencies:{"@sqltools/base-driver":"latest","@types/lodash":"^4.14.123","@types/pg":"^7.14.3","@types/vscode":"^1.42.0",concurrently:"^5.2.0",esbuild:"^0.15.7",lodash:"^4.17.19",pg:"^8.2.1",rimraf:"^3.0.2",typescript:"~4.8.3",vsce:"1.77.0"}}});var M={};O(M,{activate:()=>q,deactivate:()=>j});module.exports=A(M);var m=require("vscode");var a=[{displayName:"PostgreSQL",value:"PostgreSQL"},{displayName:"AWS Redshift",value:"AWS Redshift"},{displayName:"CockroachDB",value:"CockroachDB"}];var{publisher:L,name:N}=v(),h="PostgreSQL/Cockroach";async function q(s){let t=m.extensions.getExtension("mtxr.sqltools");if(!t)throw new Error("SQLTools not installed");await t.activate();let o=t.exports,n=`${L}.${N}`,i={extensionId:n,name:`${h} Plugin`,type:"driver",async register(e){e.resourcesMap().set(`driver/${a[0].value}/icons`,{active:s.asAbsolutePath("icons/pg/active.png"),default:s.asAbsolutePath("icons/pg/default.png"),inactive:s.asAbsolutePath("icons/pg/inactive.png")}),e.resourcesMap().set(`driver/${a[1].value}/icons`,{active:s.asAbsolutePath("icons/redshift/active.png"),inactive:s.asAbsolutePath("icons/redshift/inactive.png")}),e.resourcesMap().set(`driver/${a[2].value}/icons`,{active:s.asAbsolutePath("icons/cockroach/active.png"),default:s.asAbsolutePath("icons/cockroach/default.png"),inactive:s.asAbsolutePath("icons/cockroach/inactive.png")}),a.forEach(({value:r})=>{e.resourcesMap().set(`driver/${r}/extension-id`,n),e.resourcesMap().set(`driver/${r}/connection-schema`,s.asAbsolutePath("connection.schema.json")),e.resourcesMap().set(`driver/${r}/ui-schema`,s.asAbsolutePath("ui.schema.json"))}),await e.client.sendRequest("ls/RegisterPlugin",{path:s.asAbsolutePath("out/ls/plugin.js")})}};return o.registerPlugin(i),{driverName:h,parseBeforeSaveConnection:({connInfo:e})=>{let r=["connectionMethod","id","usePassword"];return e.usePassword&&(e.usePassword.toString().toLowerCase().includes("ask")?r.push("password"):e.usePassword.toString().toLowerCase().includes("empty")?(e.password="",r.push("askForPassword")):e.usePassword.toString().toLowerCase().includes("save")&&r.push("askForPassword")),r.forEach(b=>delete e[b]),e.pgOptions=e.pgOptions||{},e.pgOptions.enableSsl==="Enabled"?typeof e.pgOptions.ssl=="object"&&Object.keys(e.pgOptions.ssl).length===0&&(e.pgOptions.ssl=!0):e.pgOptions.enableSsl==="Disabled"&&delete e.pgOptions.ssl,delete e.pgOptions.enableSsl,Object.keys(e.pgOptions).length===0&&delete e.pgOptions,e},parseBeforeEditConnection:({connInfo:e})=>{let r=g(u({},e),{connectionMethod:"Server and Port"});return e.socketPath?r.connectionMethod="Socket File":e.connectString&&(r.connectionMethod="Connection String"),e.askForPassword?(r.usePassword="Ask on connect",delete r.password):typeof e.password=="string"&&(delete r.askForPassword,r.usePassword=e.password?"Save password":"Use empty password"),r.pgOptions=r.pgOptions||{},r.pgOptions.ssl?(r.pgOptions.enableSsl="Enabled",typeof r.pgOptions.ssl=="boolean"&&(r.pgOptions.ssl={})):r.pgOptions.enableSsl="Disabled",r},driverAliases:a}}function j(){}0&&(module.exports={activate,deactivate});
